## 비동기 처리

HTTP -> Ajax(HTTP를 효과적으로 황용) -> WebSocket

### Axios (Javascript 라이브러리)

- 브라우저와 Node.js에서 사용할 수 있는 Promise기반의 HTTP 클라이언트 라이브러리
  - 비동기 방식으로 HTTP 데이터 요청을 실행한다
  - 내부적으로는 직접적으로 XMLHttpRequest를 다루지 않고 Ajax호출을 보낼수 있다

- Promise (ES6)
  - 비동기 요청을 보내고 응답을 받았을때, 그 응답 결과를 어떻게 처리하고자 약속(Promise)하는 것
  - .then : 응답이 정상적으로 왔을 경우 -> 어떻게 처리할지 결정
  - .catch : 응답이 안 왔을 경우 -> 에러처리


### 1.Dog and Cat

#### 1.1 설치
```bash
#TIL/06_javascript (master)
$ npm install axios
```

#### axios 실행
- /06_javascript/03_js_axios/01_axios.js 파일생성

```javascript
const axios = require('axios')

axios.get('https://jsonplaceholder.typicode.com/posts/1')
  .then(response => {
    console.log(response)
  })
  .catch(error => {
    console.log(error)
  })
```

- node로 파일 실행

```bash
#06_javascript/03_js_axios (master)
$ node 01_axios.js
```

#### 랜덤하게 동물 사진 불러오기
- /06_javascript/03_js_axios/02_dogs_and_cats.html 파일생성

```html
<html>
  <head>    
  </head>
  <body>
    <h1>댕댕이와 양이들~:)</h1>
    <button id="dog">멍멍이내놔~</button>
    <button id="cat">고양이내놔~</button>
    <div class="animals">
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      const getCatImage =() =>{
        axios.get('https://api.thecatapi.com/v1/images/search')
          .then(response =>{
            const catdata = response.data[0]

            const imgTag = document.createElement('img') 
            imgTag.src = catdata.url
            imgTag.style.width ='200px'
            imgTag.style.height='200px'

            const animals = document.querySelector('.animals')            
            animals.prepend(imgTag)
          })
      }
      const getDogImage = () => {
        axios.get('https://dog.ceo/api/breeds/image/random')
        .then(response =>{
          const imgUrl = response.data.message

          const imgTag = document.createElement('img') //이미지 태그생성
          imgTag.src = imgUrl
          imgTag.style.width ='200px'
          imgTag.style.height='200px'

          const animals = document.querySelector('.animals')
          //animals.append(imgTag)
          animals.prepend(imgTag)
        })
        .catch(error => {
          console.log(error)
        })
      }
      
      const dogButton = document.querySelector('#dog')
      dogButton.addEventListener('click',getDogImage)
      const catButton = document.querySelector('#cat')
      catButton.addEventListener('click',getCatImage)
    </script>
  </body>
</html>
```

## 2. Like (GET 요청)

- AJAX
  - Asynchronous JavaScript and XML
  -  브라우저에서 웹페이지를 요청하거나 링크를 클릭하면 화면 갱신(새로고침)이 일어났다. 이는 브라우저와 서버간의 통신이 일어났다는 이야기다
  - Javascript를 활용해서 비동기적으로 서버와 브라우저가 데이터를 교환할 수 있는 통신 방식이다
  - 페이지 전체를 다시 로드하는 것이 아니라, 페이지에서 갱신이 필요한 일부분만 로드함으로써 빠른 퍼포먼스와 부드러운 화면 표시가 가능하다
    - 사용자 경험(UX) 향상 + 서버 자원 이용 절감 

- XHR (XMLHttpRequest)
  - **브라우저는 XHR 객체를 이용해서 AJAX요청을 생성하고 전송한다**
  - 서버가 브라우저 요청에 응답 내용을 반환하면, XHR객체가 그 결과를 처리한다.

