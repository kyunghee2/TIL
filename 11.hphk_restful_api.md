## RESTful API
> HTTP URI를 통해 자원(URI)을 명시하고, HTTP Method(GET,POST,PUT,DELETE)를 통해 해당 자원에 대한 CRUD 로직을 적용하는 것
> 자원(URI), 행위(HTTP Method), 표현(Representations)
> 불필요한 행위는 정의하지 않는다
- REST 핵심 구성요소
	- 1.자원(Resource):URI
	- 2.행위(Verb): HTTP Method
- REST API 디자인 가이드
	
    - URI는 **정보의 자원**을 표현해야 한다

	```bash
	#URI는 자원을 표현하는데 중점을 둔다. 따라서 show, read와 같은 행위에 대한 표현이 들어가서는 안된다

	GET /articles/show/1 (X)
	GET /articles/1 (O)
	```
    - 자원에 대한 행위는 HTTP Method로 표현한다
    ```bash
    #GET Method는 리소스 생성/삭제 등의 행위에는 어울리지 않는다

    GET /articles/1/update (X)
    PUT /articles/1 (O)
	```
	- But! Django에서는 PUT,DELETE와 같은 비공식적 요청을 default로 지원하지 않고 있기 때문에 어느정도의 절충안이 필요
	```bash
	GET /articles/2/update
	```

- 어플리케이션 내에 정의되어 있는 url 목록 조회
```bash
#05_django/10_django_movie_project
$ python manage.py show_urls
```
#### RESTful 구조로 변경 실습
- views.py :기존 create 함수 로직 수정
```python
def create(request):
    if request.method == 'POST':
        #POST 요청일 경우 -> 게시글 생성 로직 수행
        title = request.POST.get('title')
        content = request.POST.get('content')

        article = Article(title=title, content=content)
        article.save()
    
        return redirect('articles:index')
    else:
        #GET 요청일 경우 -> 폼 보여주기
        return render(request,'articles/create.html')
```
- views.py :기존 update 함수 로직 수정
```python
def update(request, article_pk):
    article = Article.objects.get(pk=article_pk)

    if request.method == 'POST':        
        article.title = request.POST.get('title')
        article.content = request.POST.get('content')
        article.save()
        #return redirect(f'/articles/{article.pk}/')
        return redirect('articles:detail',article_pk)
    else:
        context = {'article': article}
        return render(request, 'articles/update.html', context)
```
- index.html 수정
- 기존 new.html => create.html 파일명 변경
```django html
{% extends 'base.html' %}
{% block css %}

{% endblock css %}

{% block body %}
<h1 class='text-center'>Articles</h1>
<a href="{% url 'articles:create' %}">[NEW]</a>

{% for article in articles %}
<hr>
<p> [{{ article.pk }}] {{ article.title }}</p>
<a href="{% url 'articles:detail' article.pk %}">[DETAIL]</a>
{% endfor %}
{% endblock body %}
```
- 기본 edit.html => update.html로 파일명 변경
- detail.html 수정
```django html
{% extends 'base.html' %}

{% block body %}
<h1 class="text-center">DETAIL </h1>
<P>글 번호:{{article.pk}}</P>
<P>글 제목:{{article.title}}</P>
<P>글 내용:{{article.content}}</P>
<P>생성시각:{{article.created_at}}</P>
<P>수정시각:{{article.updated_at}}</P>
<hr>
<a href="{% url 'articles:index' %}">[BACK]</a>
<a href="{% url 'articles:update' article.pk %}">[EDIT]</a>
<form action="{% url 'articles:delete' article.pk %}" method="POST" style="display:inline;" onclick="return confirm('정말로 삭제하시겠습니까?');">
{% csrf_token %}
<input type="submit" value="DELETE">
</form>
{% endblock body %}
```
